<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dantebot Comparador de Precios</title>
  <style>
    body { 
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
    }
    #chat-container {
      width: 400px;
      height: 400px;
      border: 1px solid #ccc;
      border-radius: 10px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      margin-bottom: 10px;
    }
    #chatbox { 
      flex-grow: 1; 
      padding: 10px; 
      overflow-y: auto; 
      background-color: #f9f9f9; 
      word-wrap: break-word;
    }
    #input-container { display: flex; border-top: 1px solid #ccc; }
    #inputBox { flex-grow: 1; padding: 8px; border: none; outline: none; }
    #sendBtn { padding: 8px; background-color: #007bff; color: white; border: none; cursor: pointer; }
    #sendBtn:hover { background-color: #0056b3; }
    .version {
      text-align: center;
      color: #666;
      font-size: 0.9em;
      margin-top: 5px;
    }
    a {
      color: #0066cc;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<h2>Dantebot de Precios</h2>
<div id="chat-container">
  <div id="chatbox"></div>
  <div id="input-container">
    <input type="text" id="inputBox" placeholder="Pregunta por precios,lista de proveedores,etc...">
    <button id="sendBtn">Enviar</button>
  </div>
</div>
<div class="version">Versión del bot 2.0</div>

<script>
  const precios = {
    "LIU": { "FAN": 11, "RETRO": 16, "PLAYER ADIDAS": 13, "PLAYER NIKE": 14, "PLAYER PUMA": 14, "SHORT FAN": 8, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "5 Camisetas", "ENVIO EMS": 20, "CONTACTO": "https://api.whatsapp.com/send/?phone=8617724352637&text&type=phone_number&app_absent=0" },
    "BOND": { "FAN": 11, "RETRO": 16, "PLAYER ADIDAS": 14, "PLAYER NIKE": 15, "PLAYER PUMA": 15, "SHORT FAN": 8, "SHORT PLAYER": 12, "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8615361409693&text&type=phone_number&app_absent=0" },
    "STARTJERSEY": { "FAN": 12, "RETRO": 17, "PLAYER ADIDAS": 15, "PLAYER NIKE": 15, "PLAYER PUMA": 15, "SHORT FAN": 10, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "3 Camisetas", "ENVIO EMS": 10, "CONTACTO": "https://api.whatsapp.com/send/?phone=8615207598085&text&type=phone_number&app_absent=0" },
    "PINHUI": { "FAN": 11, "RETRO": 17, "PLAYER ADIDAS": 13, "PLAYER NIKE": 17, "PLAYER PUMA": 15, "SHORT FAN": 10, "SHORT PLAYER": 15, "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8613416127767&text&type=phone_number&app_absent=0" },
    "HUANG (HOMBRE)": { "FAN": 12, "RETRO": 17, "PLAYER ADIDAS": 15, "PLAYER NIKE": 17, "PLAYER PUMA": 17, "SHORT FAN": 9, "SHORT PLAYER": 14, "ENVIO GRATIS": "4 Camisetas", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8613535386151&text&type=phone_number&app_absent=0" },
    "BENE": { "FAN": 11, "RETRO": 16, "PLAYER ADIDAS": 15, "PLAYER NIKE": 15, "PLAYER PUMA": 15, "SHORT FAN": 9, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "3 Camisetas", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8618813326573&text&type=phone_number&app_absent=0" },
    "HUANG (MUJER)": { "FAN": 13, "RETRO": 18, "PLAYER ADIDAS": 16, "PLAYER NIKE": 18, "PLAYER PUMA": 18, "SHORT FAN": 11, "SHORT PLAYER": 15, "ENVIO GRATIS": "N/A", "ENVIO EMS": 25, "CONTACTO": "https://api.whatsapp.com/send/?phone=8613729056249&text&type=phone_number&app_absent=0" },
    "MAO GU": { "FAN": 12, "RETRO": 17, "PLAYER ADIDAS": 17, "PLAYER NIKE": 17, "PLAYER PUMA": 17, "SHORT FAN": 10, "SHORT PLAYER": 17, "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8615860039751&text&type=phone_number&app_absent=0" },
    "XIAO HAO": { "FAN": 12, "RETRO": 17, "PLAYER ADIDAS": 16, "PLAYER NIKE": 16, "PLAYER PUMA": 16, "SHORT FAN": 12, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8617827247734&text&type=phone_number&app_absent=0" },
    "ANNE": { "FAN": 12, "RETRO": 18, "PLAYER ADIDAS": 18, "PLAYER NIKE": 18, "PLAYER PUMA": 18, "SHORT FAN": 10, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "N/A", "ENVIO EMS": 15, "CONTACTO": "https://api.whatsapp.com/send/?phone=8613620452224&text&type=phone_number&app_absent=0" },
    "JERRY": { "FAN": 11, "RETRO": 16, "PLAYER ADIDAS": 15, "PLAYER NIKE": 15, "PLAYER PUMA": 15, "SHORT FAN": 8, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "N/A", "ENVIO EMS": 15, "CONTACTO": "https://api.whatsapp.com/send/?phone=8619330347364&text&type=phone_number&app_absent=0" },
    "FORNECEDOR (ANNE)": { "FAN": 10, "RETRO": 16, "PLAYER ADIDAS": 15, "PLAYER NIKE": 15, "PLAYER PUMA": 15, "SHORT FAN": 10, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8619584828798&text&type=phone_number&app_absent=0" },
    "POACHED EGG": { "FAN": 12, "RETRO": 15, "PLAYER ADIDAS": 13, "PLAYER NIKE": 15, "PLAYER PUMA": 14, "SHORT FAN": 8, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8619849504898&text&type=phone_number&app_absent=0" },
    "SPORTWEAR": { "FAN": 11, "RETRO": 16, "PLAYER ADIDAS": 16, "PLAYER NIKE": 16, "PLAYER PUMA": 16, "SHORT FAN": 9, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8618476319864&text&type=phone_number&app_absent=0" },
    "YAOQUAN": { "FAN": 11, "RETRO": 15, "PLAYER ADIDAS": 14, "PLAYER NIKE": 16, "PLAYER PUMA": 16, "SHORT FAN": 8, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8615707508070&text&type=phone_number&app_absent=0" },
    "WU JI ZHEN": { "FAN": 12, "RETRO": 18, "PLAYER ADIDAS": 17, "PLAYER NIKE": 17, "PLAYER PUMA": 17, "SHORT FAN": 12, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=553182946337&text&type=phone_number&app_absent=0" },
    "HANG": { "FAN": 13, "RETRO": 19, "PLAYER ADIDAS": 16, "PLAYER NIKE": 18, "PLAYER PUMA": 18, "SHORT FAN": 11, "SHORT PLAYER": 15, "ENVIO GRATIS": "4 Camisetas", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=553182946337&text&type=phone_number&app_absent=0" },
    "LIANG": { "FAN": 11, "RETRO": 16, "PLAYER ADIDAS": 14, "PLAYER NIKE": 15, "PLAYER PUMA": 14, "SHORT FAN": 9, "SHORT PLAYER": 12, "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8613713803864&text&type=phone_number&app_absent=0" },
    "WILID": { "FAN": 13, "RETRO": 19, "PLAYER ADIDAS": 16, "PLAYER NIKE": 18, "PLAYER PUMA": 18, "SHORT FAN": 11, "SHORT PLAYER": 15, "ENVIO GRATIS": "4 Camisetas", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8613536398769&text&type=phone_number&app_absent=0" },
    "XIAO LI": { "FAN": 12, "RETRO": 16, "PLAYER ADIDAS": 15, "PLAYER NIKE": 15, "PLAYER PUMA": 15, "SHORT FAN": 10, "SHORT PLAYER": "N/A", "ENVIO GRATIS": "N/A", "ENVIO EMS": "N/A", "CONTACTO": "https://api.whatsapp.com/send/?phone=8613650919444&text&type=phone_number&app_absent=0" }
  };

  function obtenerIcono(producto) {
    producto = producto.toUpperCase();
    if (producto.includes("SHORT")) return "🩳";
    if (producto.includes("ENVIO")) return "✈️";
    if (producto.includes("CONTACTO")) return "📒";
    if (producto.includes("FAN") || producto.includes("RETRO") || producto.includes("PLAYER")) return "👕";
    return "🔹";
  }

  function formatearProducto(producto) {
    return `${obtenerIcono(producto)} ${producto}`;
  }

  document.getElementById("sendBtn").addEventListener("click", sendMessage);
  document.getElementById("inputBox").addEventListener("keypress", function(event) {
    if (event.key === "Enter") sendMessage();
  });

  function sendMessage() {
    let userInput = document.getElementById("inputBox").value.trim();
    let chatbox = document.getElementById("chatbox");

    if (userInput === "") return;

    let userMessage = document.createElement("p");
    userMessage.innerHTML = `<strong>Tú:</strong> ${userInput}`;
    chatbox.appendChild(userMessage);

    let response = "Lo siento, no tengo información sobre ese producto o proveedor.";
    const inputUpper = userInput.toUpperCase();
    const normalizedInput = userInput.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");

    function encontrarMasBarato(producto) {
      let minPrice = Infinity;
      let proveedoresBaratos = [];
      
      for (let proveedor in precios) {
        const precio = precios[proveedor][producto];
        if (typeof precio === 'number') {
          if (precio < minPrice) {
            minPrice = precio;
            proveedoresBaratos = [{ nombre: proveedor, precio: precio }];
          } else if (precio === minPrice) {
            proveedoresBaratos.push({ nombre: proveedor, precio: precio });
          }
        }
      }
      
      return { minPrice, proveedoresBaratos };
    }

    if (normalizedInput.includes("lista de proveedores")) {
      response = "<strong>Proveedores:</strong><ul>";
      for (let proveedor in precios) {
        response += `<li>${proveedor}</li>`;
      }
      response += "</ul>";
    }
    else if (normalizedInput.includes("mejores paginas") || normalizedInput.includes("mejores páginas") || 
             normalizedInput.includes("paginas recomendadas") || normalizedInput.includes("páginas recomendadas") ||
             normalizedInput.includes("sitios recomendados") || normalizedInput.includes("webs recomendadas")) {
      response = `
        <strong>🔝 10 Mejores Páginas para Comprar Camisetas:</strong>
        <ol>
          <li>🌐 <a href="https://www.kitmm.com" target="_blank">WWW.KITMM.COM</a></li>
          <li>🌐 <a href="https://www.kitgg7.com" target="_blank">WWW.KITGG7.COM</a></li>
          <li>🌐 <a href="https://www.fballshirt.com" target="_blank">WWW.FBALLSHIRT.COM</a></li>
          <li>🌐 <a href="https://www.grkits3.com" target="_blank">WWW.GRKITS3.COM</a></li>
          <li>🌐 <a href="https://www.minejerseys.cc" target="_blank">WWW.MINEJERSEYS.CC</a></li>
          <li>🌐 <a href="https://www.bestzv1.com" target="_blank">WWW.BESTZV1.COM</a></li>
          <li>🌐 <a href="https://www.koko101.com" target="_blank">WWW.KOKO101.COM</a></li>
          <li>🌐 <a href="https://www.aagodb.com" target="_blank">WWW.AAGODB.COM</a></li>
          <li>🌐 <a href="https://www.yyjersey.com" target="_blank">WWW.YYJERSEY.COM</a></li>
          <li>🌐 <a href="https://www.spfoot1.com" target="_blank">WWW.SPFOOT1.COM</a></li>
        </ol>
        <p>Estas son las páginas más confiables y con mejores reseñas según la comunidad de FUTBOL XL.</p>
        <p>📽️ <a href="https://www.youtube.com/watch?v=T1tP98acheI" target="_blank">VIDEO RESEÑA FUTBOL XL</a></p>  
      `;
    }
    else if (/BARATO|BARATA|ECONOMICO|ECONOMICA/i.test(inputUpper)) {
      let productoBuscado = "";
      const productos = ["SHORT FAN", "SHORT PLAYER", "PLAYER ADIDAS", "PLAYER NIKE", "PLAYER PUMA", "RETRO", "FAN"];
      
      for (let producto of productos) {
        if (inputUpper.includes(producto)) {
          productoBuscado = producto;
          break;
        }
      }
      
      if (productoBuscado) {
        const { minPrice, proveedoresBaratos } = encontrarMasBarato(productoBuscado);
        
        if (proveedoresBaratos.length > 0) {
          response = `<strong>Proveedor(es) con el ${productoBuscado} más barato ($${minPrice}):</strong><ul>`;
          proveedoresBaratos.forEach(({ nombre, precio }) => {
            const contacto = precios[nombre]["CONTACTO"];
            if (contacto) {
              response += `<li>${nombre}: $${precio} - <a href="${contacto}" target="_blank">Contactar</a></li>`;
            } else {
              response += `<li>${nombre}: $${precio}</li>`;
            }
          });
          response += "</ul>";
        } else {
          response = `No encontré proveedores con precios disponibles para ${productoBuscado}`;
        }
      } else {
        response = "Por favor, especifica qué producto buscas (ej: 'fan más barato', 'player nike económico')";
      }
    }
    else if (/FAN|fan/i.test(userInput)) {
      let result = "<strong>Proveedores y precios para FAN:</strong><ul>";
      for (let proveedor in precios) {
        if (precios[proveedor]["FAN"] !== "N/A") {
          result += `<li>${proveedor}: $${precios[proveedor]["FAN"]}</li>`;
        }
      }
      result += "</ul>";
      response = result;
    } 
    else if (/RETRO|retro/i.test(userInput)) {
      let result = "<strong>Proveedores y precios para RETRO:</strong><ul>";
      for (let proveedor in precios) {
        if (precios[proveedor]["RETRO"] !== "N/A") {
          result += `<li>${proveedor}: $${precios[proveedor]["RETRO"]}</li>`;
        }
      }
      result += "</ul>";
      response = result;
    }
    else if (/PLAYER ADIDAS|player adidas/i.test(userInput)) {
      let result = "<strong>Proveedores y precios para PLAYER ADIDAS:</strong><ul>";
      for (let proveedor in precios) {
        if (precios[proveedor]["PLAYER ADIDAS"] !== "N/A") {
          result += `<li>${proveedor}: $${precios[proveedor]["PLAYER ADIDAS"]}</li>`;
        }
      }
      result += "</ul>";
      response = result;
    }
    else if (/PLAYER NIKE|player nike/i.test(userInput)) {
      let result = "<strong>Proveedores y precios para PLAYER NIKE:</strong><ul>";
      for (let proveedor in precios) {
        if (precios[proveedor]["PLAYER NIKE"] !== "N/A") {
          result += `<li>${proveedor}: $${precios[proveedor]["PLAYER NIKE"]}</li>`;
        }
      }
      result += "</ul>";
      response = result;
    }
    else if (/PLAYER PUMA|player puma/i.test(userInput)) {
      let result = "<strong>Proveedores y precios para PLAYER PUMA:</strong><ul>";
      for (let proveedor in precios) {
        if (precios[proveedor]["PLAYER PUMA"] !== "N/A") {
          result += `<li>${proveedor}: $${precios[proveedor]["PLAYER PUMA"]}</li>`;
        }
      }
      result += "</ul>";
      response = result;
    }    
    else if (/SHORT FAN|short fan/i.test(userInput)) {
      let result = "<strong>Proveedores y precios para SHORT FAN:</strong><ul>";
      for (let proveedor in precios) {
        if (precios[proveedor]["SHORT FAN"] !== "N/A") {
          result += `<li>${proveedor}: $${precios[proveedor]["SHORT FAN"]}</li>`;
        }
      }
      result += "</ul>";
      response = result;
    }
    else if (/SHORT PLAYER|short player/i.test(userInput)) {
      let result = "<strong>Proveedores y precios para SHORT PLAYER:</strong><ul>";
      for (let proveedor in precios) {
        if (precios[proveedor]["SHORT PLAYER"] !== "N/A") {
          result += `<li>${proveedor}: $${precios[proveedor]["SHORT PLAYER"]}</li>`;
        }
      }
      result += "</ul>";
      response = result;
    }
    else if (/envios gratis|envíos gratis/i.test(userInput)) {
      let proveedoresConEnvioGratis = [];
      for (let proveedor in precios) {
        if (precios[proveedor]["ENVIO GRATIS"] !== "N/A") {
          proveedoresConEnvioGratis.push({
            nombre: proveedor,
            condicion: precios[proveedor]["ENVIO GRATIS"]
          });
        }
      }
      response = `<strong>Proveedores que ofrecen envío gratis:</strong><ul>`;
      proveedoresConEnvioGratis.forEach(({ nombre, condicion }) => {
        response += `<li>${nombre}: Envío gratis apartir de ${condicion}</li>`;
      });
      response += "</ul>";
    }
    else if (/envios ems|envíos ems/i.test(userInput)) {
      let proveedoresConEMS = [];
      for (let proveedor in precios) {
        if (precios[proveedor]["ENVIO EMS"] !== "N/A") {
          proveedoresConEMS.push({
            nombre: proveedor,
            condicion: precios[proveedor]["ENVIO EMS"]
          });
        }
      }
      response = `<strong>Proveedores que ofrecen envíos EMS:</strong><ul>`;
      proveedoresConEMS.forEach(({ nombre, condicion }) => {
        response += `<li>${nombre}: Envíos EMS disponibles por $ ${condicion}</li>`;
      });
      response += "</ul>";
    }
    else {
      let foundSupplier = "";
      for (let proveedor in precios) {
        if (inputUpper.includes(proveedor.toUpperCase())) {
          foundSupplier = proveedor;
          break;
        }
      }
      if (foundSupplier !== "") {
        const productsList = ["FAN", "RETRO", "PLAYER ADIDAS", "PLAYER NIKE", "PLAYER PUMA", "SHORT FAN", "SHORT PLAYER", "ENVIO GRATIS", "ENVIO EMS", "CONTACTO"];
        let foundProducts = [];
        productsList.forEach(product => {
          if (inputUpper.includes(product)) {
            foundProducts.push(product);
          }
        });
        if (foundProducts.length > 0) {
          response = `<strong>Precios para ${foundSupplier}:</strong><ul>`;
          foundProducts.forEach(product => {
            if (product.toUpperCase() === "CONTACTO") {
              response += `<li>${formatearProducto(product)}: <a href="${precios[foundSupplier][product]}" target="_blank">Contactalo por WhatsApp</a></li>`;
            } else if (product.toUpperCase() === "ENVIO GRATIS") {
              let envioGratis = precios[foundSupplier][product];
              if (envioGratis === "N/A") {
                response += `<li>${formatearProducto(product)}: No disponible</li>`;
              } else {
                response += `<li>${formatearProducto(product)}: A partir de ${envioGratis}</li>`;
              }
            } else if (product.toUpperCase() === "ENVIO EMS") {
              let envioEMS = precios[foundSupplier][product];
              if (envioEMS === "N/A") {
                response += `<li>${formatearProducto(product)}: No disponible</li>`;
              } else {
                response += `<li>${formatearProducto(product)}: $${envioEMS}</li>`;
              }
            } else {
              response += `<li>${formatearProducto(product)}: $${precios[foundSupplier][product]}</li>`;
            }
          });
          response += "</ul>";
        } else {
          response = `<strong>Todos los precios para ${foundSupplier}:</strong><ul>`;
          for (let product in precios[foundSupplier]) {
            if (product.toUpperCase() === "CONTACTO") {
              response += `<li>${formatearProducto(product)}: <a href="${precios[foundSupplier][product]}" target="_blank">Contactalo por WhatsApp</a></li>`;
            } else if (product.toUpperCase() === "ENVIO GRATIS") {
              let envioGratis = precios[foundSupplier][product];
              if (envioGratis === "N/A") {
                response += `<li>${formatearProducto(product)}: No disponible</li>`;
              } else {
                response += `<li>${formatearProducto(product)}: A partir de ${envioGratis}</li>`;
              }
            } else if (product.toUpperCase() === "ENVIO EMS") {
              let envioEMS = precios[foundSupplier][product];
              if (envioEMS === "N/A") {
                response += `<li>${formatearProducto(product)}: No disponible</li>`;
              } else {
                response += `<li>${formatearProducto(product)}: $${envioEMS}</li>`;
              }
            } else {
              response += `<li>${formatearProducto(product)}: $${precios[foundSupplier][product]}</li>`;
            }
          }
          response += "</ul>";
        }
      }
    }

    let botMessage = document.createElement("p");
    botMessage.innerHTML = `<strong>Bot:</strong> ${response}`;
    chatbox.appendChild(botMessage);

    document.getElementById("inputBox").value = "";
    chatbox.scrollTop = chatbox.scrollHeight;
  }
</script>

</body>
</html>
